{
  "$schema": "https://playground.wordpress.net/blueprint-schema.json",
  "login": true, 
  "plugins": ["seriously-simple-podcasting"],
  
  "steps": [
    {
			"step": "updateUserMeta",
			"meta": {
				"first_name": "Birgit",
				"last_name": "Pauli-Haack",
				"admin_color": "modern"
			},
			"userId": 1
		},
  
    {
        "step": "resetData"
    },
    {
        "step": "installPlugin",
        "pluginData": {
          "resource": "url",
          "url": "https://github-proxy.com/proxy/?repo=bph/gt-podcast-bb"
        }
    },
    {
      "step": "runPHP",
      "code": "<?php\nrequire_once '/wordpress/wp-load.php';\n\n// Set up podcast options\nupdate_option('ss_podcasting_data_description', 'Welcome to the Gutenberg Times Podcast - your source for the latest WordPress block editor news, tips, and tutorials.');\nupdate_option('ss_podcasting_data_image', 'https://picsum.photos/400/400?random=1');\necho 'Podcast options configured';\n?>"
    },
    {
      "step": "runPHP", 
      "code": "<?php\nrequire_once '/wordpress/wp-load.php';\n\n// Create sample podcast posts\nfor ($i = 1; $i <= 3; $i++) {\n    $post_id = wp_insert_post(array(\n        'post_title' => 'Episode ' . $i . ': Block Editor Updates',\n        'post_content' => 'In this episode, we discuss the latest WordPress block editor updates, new features, and how block bindings revolutionize dynamic content.',\n        'post_excerpt' => 'Latest WordPress block editor news for Episode ' . $i,\n        'post_type' => 'podcast',\n        'post_status' => 'publish'\n    ));\n    \n    if ($post_id) {\n        update_post_meta($post_id, 'date_recorded', date('Y-m-d', strtotime('-' . ($i * 7) . ' days')));\n        update_post_meta($post_id, 'audio_file', 'https://www2.cs.uic.edu/~i101/SoundFiles/BabyElephantWalk60.wav');\n        update_post_meta($post_id, 'cover_image_id', 1);\n    }\n}\necho 'Created 3 sample podcast episodes';\n?>"
    },
    {
			"step": "writeFile",
			"path": "/wordpress/wp-content/podcast-page-content.md",
			"data": {
				"resource": "url",
				"url": "https://raw.githubusercontent.com/bph/gt-podcast-bb/refs/heads/main/_blueprint/demo-page-content.html"
			}
		},
    {
      "step": "wp-cli",
      "command": "wp post create --post_type=page --post_title='Podcast Archive Demo' --post_status=publish /wordpress/wp-content/podcast-page-content.md"
    },
    {
      "step": "wp-cli",
      "command": "wp option update show_on_front page"
    },
    {
      "step": "wp-cli", 
      "command": "wp option update page_on_front 1"
    }
  ],
  "siteOptions": {
    "blogname": "GT Podcast Demo",
    "blogdescription": "Demonstrating WordPress Block Templates with Podcast Block Bindings",
    "permalink_structure": "/%postname%/",
    "show_on_front": "page",
		"page_on_front": "4"
  }
}